function ooManager(){this.packages=[];this.versionMajor="2";this.versionMinor="1";this.version="v"+this.versionMajor+"."+this.versionMinor;this.serviceEndpoint="https://oocharts.org/s/api/v2?callback=?";this.ooid=undefined;this.load=ooManager_load;this.loadScript=ooManager_loadScript;this.setOOId=ooManager_setOOId;this.Timeline=ooTimeline;this.Metric=ooMetric;this.Pie=ooPie;this.Table=ooTable;this.Query=ooQuery}function ooManager_loadScript(a,b){var c=document.createElement("script");c.type="text/javascript";c.src=a;c.async=false;c.onreadystatechange=c.onload=function(){var a=c.readyState;if(!b.done&&(!a||/loaded|complete/.test(a))){b.done=true;b()}};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}function ooManager_setOOId(a){this.ooid=a}function ooManager_load(a){var b=this;var c=function(a){if(typeof google==="undefined"){b.loadScript("https://www.google.com/jsapi",a)}else{a()}};var d=function(a){if(typeof jQuery==="undefined"){b.loadScript("https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",a)}else{a()}};var e=function(a){if(typeof google.visualization==="undefined"){google.load("visualization","1",{packages:["corechart","table"],callback:a})}else{var b=[];if(typeof google.visualization.corechart==="undefined"){b.push("corechart")}if(typeof google.visualization.table==="undefined"){b.push("table")}if(b.length>0){google.load("visualization","1",{packages:b,callback:a})}}};var f=a;c(function(){d(function(){e(function(){f()})})})}function ooMetric(a,b,c){this.query=new ooQuery(a,b,c);this.metric=undefined;this.draw=ooMetric_draw;this.setMetric=ooMetric_setMetric}function ooMetric_setMetric(a){this.metric=a}function ooMetric_draw(a,b){this.query.addMetric(this.metric);this.query.execute(function(c){$("#"+a).text(c[0][0]);if(typeof b!="undefined"){b()}})}function ooTimeline(a,b,c){this.query=new ooQuery(a,b,c);this.query.addDimension("ga:date");this.options={};this.labels=[];this.draw=ooTimeline_draw;this.addMetric=ooTimeline_addMetric;this.setOption=oo_setOption}function ooTimeline_addMetric(a,b){this.query.addMetric(a);this.labels.push(b)}function ooTimeline_draw(a,b){var c=this;this.query.execute(function(d){for(var e in d){d[e][0]=new Date(d[e][0].substring(0,4),d[e][0].substring(4,6)-1,d[e][0].substring(6,8))}var f=new google.visualization.DataTable;f.addColumn("date","Date");for(var g in c.labels){f.addColumn("number",c.labels[g])}f.addRows(d);var h=new google.visualization.LineChart(document.getElementById(a));h.draw(f,c.options);if(typeof b!="undefined"){b()}})}function ooPie(a,b,c){this.query=new ooQuery(a,b,c);this.metLabel=undefined;this.dimension=undefined;this.metric=undefined;this.options={};this.draw=ooPie_draw;this.setOption=oo_setOption;this.setMetric=ooPie_setMetric;this.setDimension=ooPie_setDimension}function ooPie_setMetric(a,b){this.metric=a;this.metLabel=b}function ooPie_setDimension(a){this.dimension=a}function ooPie_draw(a,b){this.query.addMetric(this.metric);this.query.addDimension(this.dimension);var c=this;this.query.execute(function(d){var e=new google.visualization.DataTable;e.addColumn("string",c.dimension);e.addColumn("number",c.metLabel);e.addRows(d);var f=new google.visualization.PieChart(document.getElementById(a));f.draw(e,c.options);if(typeof b!="undefined"){b()}})}function ooTable(a,b,c){this.query=new ooQuery(a,b,c);this.dimLabels=[];this.metLabels=[];this.options={};this.draw=ooTable_draw;this.setOption=oo_setOption;this.addMetric=ooTable_addMetric;this.addDimension=ooTable_addDimension}function ooTable_addDimension(a,b){this.query.addDimension(a);this.dimLabels.push(b)}function ooTable_addMetric(a,b){this.query.addMetric(a);this.metLabels.push(b)}function ooTable_draw(a,b){var c=this;this.query.execute(function(d){var e=[];for(var f in c.dimLabels){e.push(c.dimLabels[f])}for(var g in c.metLabels){e.push(c.metLabels[g])}d.splice(0,0,e);var h=google.visualization.arrayToDataTable(d);var i=new google.visualization.Table(document.getElementById(a));i.draw(h,c.options);if(typeof b!="undefined"){b()}})}function ooQuery(a,b,c){this.metrics=[];this.dimensions=[];this.segments=undefined;this.filters=undefined;this.sort=undefined;this.maxResults=undefined;this.autoParse=true;this.startDate=b;this.endDate=c;this.aid=a;this.addMetric=ooQuery_addMetric;this.addDimension=ooQuery_addDimension;this.setFilter=ooQuery_setFilter;this.setSort=ooQuery_setSort;this.setSegment=ooQuery_setSegment;this.setMaxResults=ooQuery_setMaxResults;this.setAutoParse=ooQuery_setAutoParse;this.execute=ooQuery_execute}function ooQuery_execute(a){try{var b=oo.serviceEndpoint;var c={id:oo.ooid,aid:this.aid,startDate:this.startDate.toDateString(),endDate:this.endDate.toDateString(),versionMinor:oo.versionMinor,autoParse:this.autoParse};if(this.metrics.length>0){c["metrics"]=this.metrics.toString()}if(this.dimensions.length>0){c["dimensions"]=this.dimensions.toString()}if(typeof this.segments!="undefined"){c["segments"]=this.segments}if(typeof this.filters!="undefined"){c["filters"]=this.filters}if(typeof this.sort!="undefined"){c["sort"]=this.sort}if(typeof this.maxResults!="undefined"){c["maxResults"]=this.maxResults}$.getJSON(b,c,function(b){a(b.data)}).error(function(){throw Error("Data could not be retrieved from service.")})}catch(d){throw new Error("Error making request: "+d.message)}}function ooQuery_addMetric(a){this.metrics.push(a)}function ooQuery_addDimension(a){this.dimensions.push(a)}function ooQuery_setFilter(a){this.filters=a}function ooQuery_setSort(a){this.sort=a}function ooQuery_setSegment(a){this.segments=a}function ooQuery_setMaxResults(a){this.maxResults=a}function ooQuery_setAutoParse(a){this.autoParse=a}function oo_setOption(a,b){if(typeof this.options[a]=="undefined"){this.options[a]=b}else{var c=this;$.extend(c.options[a],b)}}var oo=oo||new ooManager